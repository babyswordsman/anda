# Concepts

The key elements of conversational search: question understanding, conversation flow, retrieval & reranking, answer generation and related question suggestions. 

Particularly, the ai search agent - 

* maintains the chat history for each user as long-term memory
* judges to search or not
* rewrites the conversational query
* simultaneously retrieves from multiple data sources, e.g., Web search APIs and/or internal index providers
* reranks the retrieval result
* generates the answer by calling LLMs
* suggests related questions
* can be planning and multi-step reasoning

## chat history

build a specialized store with a simple CRUD API managing the resources: memories, question/answer messages, summaries, et al.

## query rewriting

## retrieval

usually search across multiple sources (e.g., the web + vertical indexes) and chat history, rerank the result and send it as context to the LLM. 

* search the web - via APIs or metasearch like searxng
* retrieve self-hosted indexes - via vearch or other vector/hybrid search systems

## reranking

## answer generation

## question suggestions

also generated by the LLM

## multi-step reasoning

## planning


## indexing flow

connectors: webpages, files, et al.

ray data stored in cubefs -> indexes stored in vearch -> question answering in anda

## query flow

user query -> query processing (expansion, filter extraction, context injection, intent classfication) -> hybrid search (embedding similarity search, keword search, multiple search providers) -> relevant passages -> reranked top K -> generative model -> final answer



